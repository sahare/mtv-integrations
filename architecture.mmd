graph TB
    subgraph "ACM Hub Cluster"
        subgraph "MTV Integrations Namespace"
            A[MTV Integrations Controller<br/>ManagedClusterReconciler]
            B[MTV Plan Webhook<br/>/validate-plan]
            C[Certificate Manager<br/>TLS Certificates]
            D[Leader Election<br/>Coordination]
        end
        
        subgraph "openshift-mtv Namespace"
            E[Provider Secrets<br/>Authentication Data]
            F[Provider Resources<br/>MTV Registration]
        end
        
        subgraph "Managed Cluster Namespaces"
            G[ManagedServiceAccounts<br/>Token Management]
            H[ClusterPermissions<br/>cluster-admin RBAC]
        end
        
        subgraph "ACM Core Components"
            I[ManagedCluster Resources<br/>Cluster Registry]
            J[kubevirtprojects<br/>ClusterView API]
            K[ManifestWork<br/>Addon Deployment]
        end
    end
    
    subgraph "Managed Clusters"
        subgraph "Cluster 1"
            L1[CNV Operator<br/>Virtualization]
            M1[VolSync<br/>Data Replication]
            N1[Service Account<br/>Authentication]
        end
        
        subgraph "Cluster 2"
            L2[MTV Components<br/>Migration Tools]
            M2[Storage Classes<br/>Volume Management]
            N2[Kubeconfig Access<br/>API Authentication]
        end
    end
    
    subgraph "External Systems"
        O[Container Registries<br/>quay.io, registry.redhat.io]
        P[Certificate Authorities<br/>cert-manager, External CA]
        Q[Object Storage<br/>S3, PVCs, Snapshots]
        R[User Interfaces<br/>ACM Console, CLI]
    end
    
    %% Controller Relationships
    A -->|Monitors| I
    A -->|Creates/Manages| G
    A -->|Creates| H
    A -->|Creates/Updates| E
    A -->|Registers| F
    A -->|Uses| C
    A -->|Coordinates via| D
    
    %% Webhook Relationships  
    B -->|Validates| F
    B -->|Checks Access| J
    B -->|Uses| C
    R -->|Creates Plans| B
    
    %% Cross-Cluster Authentication
    G -->|Generates Tokens| E
    N1 -->|Authenticates with| E
    N2 -->|Authenticates with| E
    
    %% Addon Deployment
    K -->|Deploys| L1
    K -->|Deploys| L2
    K -->|Deploys| M1
    
    %% External Dependencies
    A -->|Pulls Images| O
    L1 -->|Pulls Images| O
    L2 -->|Pulls Images| O
    C -->|Validates| P
    M1 -->|Replicates to| Q
    M2 -->|Manages| Q
    
    %% Styling
    style A fill:#e1f5fe
    style B fill:#e8f5e8
    style E fill:#fff3e0
    style F fill:#fff3e0
    style G fill:#ffebee
    style H fill:#ffebee
    style I fill:#f3e5f5
    style J fill:#f3e5f5
    
    %% Security Annotations
    classDef sensitive fill:#ffcdd2,stroke:#d32f2f,stroke-width:2px
    classDef secure fill:#c8e6c9,stroke:#388e3c,stroke-width:2px
    classDef external fill:#e0e0e0,stroke:#757575,stroke-width:2px
    
    class E,G,H sensitive
    class B,C,P secure
    class O,Q,R external
